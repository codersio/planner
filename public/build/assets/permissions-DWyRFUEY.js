import{r as p,W as k,j as s}from"./app-CcCqTZT3.js";import{H as P,N as w}from"./Nav-DXO1xuTL.js";import"./index-DXmVpITn.js";const S=({user:u,user_type:h,permissions:d,notif:f})=>{const[j,v]=p.useState({}),{data:c,setData:m,post:g,errors:x}=k({role_name:"",permissions:[]});p.useEffect(()=>{N(d)},[d]);const N=e=>{if(e&&e.length>0){const t=e.reduce((r,o)=>{const i=o.name.split("_"),l=i[0],n=i.slice(1).join("_");return r[n]||(r[n]=[]),r[n].push({id:o.id,action:l}),r},{}),a=Object.keys(t).reduce((r,o)=>(r[o]=t[o].sort((i,l)=>{const n=["view","create","edit","delete"];return n.indexOf(i.action)-n.indexOf(l.action)}),r),{});v(a)}},b=e=>{m("permissions",c.permissions.includes(e)?c.permissions.filter(t=>t!==e):[...c.permissions,e])},C=e=>{m(e.target.name,e.target.value)},_=e=>{e.preventDefault(),g("/roles-permission-store",{onSuccess:()=>{console.log("Permissions saved successfully!")},onError:()=>{console.log("Error saving permissions.")}})};return s.jsxs("div",{className:"w-[85.2%] ml-[12rem]",children:[s.jsx(P,{user:u,notif:f}),s.jsx(w,{user_type:h}),s.jsx("div",{className:"px-[9rem] form mt-9",children:s.jsxs("div",{className:"form-group",children:[s.jsx("input",{type:"text",placeholder:"Role Name",className:"w-full rounded-md",name:"role_name",value:c.role_name,onChange:C}),x.role_name&&s.jsx("div",{className:"invalid-feedback",children:x.role_name})]})}),s.jsxs("div",{className:"px-[9rem] form-group",children:[Object.entries(j).map(([e,t])=>s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("h3",{className:"w-[7rem]",children:e.charAt(0).toUpperCase()+e.slice(1)})," ",s.jsx("div",{style:{marginLeft:"20px"},className:"flex space-x-[4rem]",children:t.map(a=>s.jsxs("div",{className:"space-x-2",children:[s.jsx("input",{type:"checkbox",name:"permissions[]",value:a.id,checked:c.permissions.includes(a.id),onChange:()=>b(a.id)}),s.jsx("label",{children:a.action.charAt(0).toUpperCase()+a.action.slice(1)})," "]},a.id))})]},e)),s.jsx("button",{onClick:_,type:"submit",className:"p-2 mt-4 text-white rounded btn bg-slate-900",children:"Save Permissions"})]})]})};export{S as default};

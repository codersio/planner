import{r as o,W as O,b as i,j as t}from"./app-BOMB9RPx.js";import{H as P,N as D}from"./Nav-B4LcHgH8.js";import{M}from"./Modal-BOLn6k3y.js";import{N as A}from"./notyf.min-DLu_xjpT.js";import"./iconBase-CO2Y0hZ5.js";import"./index-DFW5HbVH.js";import"./index-rLyOIo_R.js";import"./transition-BN5oWD1_.js";const G=({user:x,notif:h,user_type:b,products:g,category:y,tax:I})=>{const[f,d]=o.useState(!1),[l,m]=o.useState(null),[T,j]=o.useState([]),[U,N]=o.useState([]),a=new A,{data:s,setData:n,post:v,put:w,reset:C,errors:u}=O({name:"",category_id:"",purchase_price:"",unit_id:"",description:"",image:null,sku:""});o.useEffect(()=>{k(),_()},[]);const k=async()=>{try{const e=await i.get("/api/taxes");j(e.data)}catch(e){console.error("Error fetching tax options:",e)}},_=async()=>{try{const e=await i.get("/api/units");N(e.data)}catch(e){console.error("Error fetching unit options:",e)}},p=(e=null)=>{d(!0),n({name:e?e.name:"",category_id:e?e.category_id:"",purchase_price:e?e.purchase_price:"",unit_id:e?e.unit_id:"",description:e?e.description:"",image:null,sku:e?e.sku:""}),m(e?e.id:null)},c=()=>{d(!1),m(null),C()},S=e=>{e.preventDefault();const r=new FormData;r.append("name",s.name),r.append("category_id",s.category_id),r.append("purchase_price",s.purchase_price),r.append("unit_id",s.unit_id),r.append("description",s.description),r.append("sku",s.sku),s.image&&r.append("image",s.image),l?w(`/product-services/${l}`,{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{a.success("Product updated successfully!"),window.location.reload(),c()},onError:()=>{a.error("An error occurred while updating the product.")}}):v("/product-services",{data:r,headers:{"Content-Type":"multipart/form-data"},onSuccess:()=>{a.success("Product created successfully!"),window.location.reload(),c()},onError:()=>{a.error("An error occurred while creating the product.")}})},E=async e=>{if(confirm("Are you sure you want to delete this product?"))try{await i.delete(`/product-services/${e}`),a.success("Product deleted successfully!"),window.location.reload()}catch(r){console.error("Error deleting product:",r),a.error("An error occurred while deleting the product.")}};return t.jsxs("div",{className:"w-[83.2%] ml-[11.5rem] absolute right-0",children:[t.jsx(P,{user:x,notif:h}),t.jsx(D,{user_type:b}),t.jsx("div",{className:"flex px-9",children:t.jsxs("div",{className:"flex-1 p-6 ",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("h1",{className:"mb-4 text-2xl font-bold",children:"Manage Services"}),t.jsx("button",{onClick:()=>p(),className:"p-2 text-teal-900 underline rounded-md",children:"Create Services"})]}),t.jsx("div",{className:"mt-3",children:t.jsxs("table",{className:"min-w-full border border-gray-300",children:[t.jsx("thead",{className:"bg-gray-200",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Services Name"}),t.jsx("th",{className:"px-4 py-2 text-left border-b",children:"Services Category"}),t.jsx("th",{className:"px-4 py-2 text-right border-b",children:"Action"})]})}),t.jsx("tbody",{children:g.map(e=>t.jsxs("tr",{className:"transition duration-200 hover:bg-gray-100",children:[t.jsx("td",{className:"px-4 py-2 border-b",children:e.name}),t.jsx("td",{className:"px-4 py-2 border-b",children:e.cname}),t.jsxs("td",{className:"px-4 py-2 text-right border-b",children:[t.jsx("button",{onClick:()=>p(e),className:"text-blue-600 underline hover:text-blue-800",children:"Edit"}),t.jsx("button",{onClick:()=>E(e.id),className:"ml-4 text-red-600 underline hover:text-red-800",children:"Delete"})]})]},e.id))})]})})]})}),t.jsx(M,{show:f,onClose:c,children:t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-lg font-bold",children:l?"Edit Services":"Create New Services"}),u.name&&t.jsx("p",{className:"text-red-600",children:u.name}),t.jsxs("form",{onSubmit:S,className:"mt-4",children:[t.jsxs("label",{className:"block mb-2",children:["Name:",t.jsx("input",{type:"text",value:s.name,onChange:e=>n("name",e.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0})]}),t.jsxs("label",{className:"block mb-2",children:["Category :",t.jsxs("select",{value:s.category_id,onChange:e=>n("category_id",e.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md",required:!0,children:[t.jsx("option",{value:"",children:"Select Category"}),y.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),t.jsxs("label",{className:"block mb-2",children:["Image:",t.jsx("input",{type:"file",onChange:e=>n("image",e.target.files[0]),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md"})]}),t.jsxs("label",{className:"block mb-2",children:["Description:",t.jsx("input",{type:"text",value:s.description,onChange:e=>n("description",e.target.value),className:"block w-full p-2 mt-1 border border-gray-300 rounded-md"})]}),t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{type:"submit",className:"p-2 mt-4 text-white bg-blue-600 rounded-md",children:l?"Update ":"Save"}),t.jsx("button",{onClick:c,type:"button",className:"p-2 mt-4 text-white bg-red-600 rounded-md",children:"Close"})]})]})]})})]})};export{G as default};
